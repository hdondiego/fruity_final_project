<!DOCTYPE html>
<html lang="eng">
    <head>
        <title>Fruity Delight</title>
        <link rel="stylesheet" href="index.css">
    </head>
    <body>
        <div class="topnav">
            <p onclick="openNav()" style="color: white; margin-left: 2%;">Cart</p>
        </div>

        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <header>
                <h4>Items</h4>
            </header>
            <div class="items_list">
                <table id="items"></table>
            </div>
            <footer>
                <table>
                    <tr>
                        <td><b>Subtotal:</b></td>
                        <td><p id="subtotal_price">$0.00</p></td>
                    </tr>
                </table>
            </footer>
        </div>

        <img src="fruity_delight_logo.png" alt="Fruity Delight Logo" class="logo">
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <button class="button" onclick="sortAlphAZ()">Name &uarr;</button>
        <button class="button" onclick="sortAlphZA()">Name &darr;</button>
        <button class="button" onclick="sortPriceLowHigh()">Price &uarr;</button>
        <button class="button" onclick="sortPriceHighLow()">Price &darr;</button>

        <div id="container">
            <div class="row">
                <div class="column"
                    data-price="3.99"
                    data-name="blueberries">
                    <div class="card">  
                        <img src="./products/blueberries.jpg" alt="Blueberries" class="product">
                        <h5>Blueberries<br><br>
                            $3.99</h5>
                        <button id="Blueberries" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="2.99"
                    data-name="pineapple">
                    <div class="card">
                        <img src="./products/pineapple.jpg" alt="Pineapple" class="product">
                        <h5>Pineapple<br><br>
                            $2.99</h5>
                        <button id="Pineapple" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="0.69"
                    data-name="bananas">
                    <div class="card">
                        <img src="./products/bananas.jpg" alt="Bananas" class="product">
                        <h5>Bananas<br><br>
                            $0.69</h5>
                        <button id="Bananas" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="1.00"
                    data-name="red apple">
                    <div class="card">
                        <img src="./products/red_apple.jpg" alt="Red Apple" class="product">
                        <h5>Red Apple<br><br>
                            $1.00</h5>
                        <button id="RedApple" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="0.75"
                    data-name="peach">
                    <div class="card">
                        <img src="./products/peach.jpg" alt="Peach" class="product">
                        <h5>Peach<br><br>
                            $0.75</h5>
                        <button id="Peach" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="2.99"
                    data-name="raspberries">
                    <div class="card">
                        <img src="./products/raspberries.jpg" alt="Raspberries" class="product">
                        <h5>Raspberries<br><br>
                            $2.99</h5>
                        <button id="Raspberries" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="1.99"
                    data-name="mangos">
                    <div class="card">
                        <img src="./products/mangos.jpg" alt="Mangos" class="product">
                        <h5>Mangos<br><br>
                            $1.99</h5>
                        <button id="Mangos" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>
                
                <div class="column"
                    data-price="2.99"
                    data-name="oranges">
                    <div class="card">
                        <img src="./products/oranges.jpg" alt="Oranges" class="product">
                        <h5>Oranges<br><br>
                            $2.99</h5>
                        <button id="Oranges" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="7.99"
                    data-name="durian">
                    <div class="card">
                        <img src="./products/durian.jpg" alt="Durian" class="product">
                        <h5>Durian<br><br>
                            $7.99</h5>
                        <button id="Durian" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="0.43"
                    data-name="kiwi">
                    <div class="card">
                        <img src="./products/kiwi.jpg" alt="Kiwi" class="product">
                        <h5>Kiwi<br><br>
                            $0.43</h5>
                        <button id="Kiwi" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="5.59"
                    data-name="dragonfruit">
                    <div class="card">
                        <img src="./products/dragonfruit.jpg" alt="Dragonfruit" class="product">
                        <h5>Dragonfruit<br><br>
                            $5.59</h5>
                        <button id="Dragonfruit" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>

                <div class="column"
                    data-price="4.98"
                    data-name="grapes">
                    <div class="card">
                        <img src="./products/grapes.png" alt="Grapes" class="product">
                        <h5>Grapes<br><br>
                            $4.98</h5>
                        <button id="Grapes" class="cart_button" onclick="addToCart()">Add to Cart<span></span></button>
                    </div>
                </div>
            </div>
        </div>
    </body>

    <!--Code for sorting buttons-->
    <script>
        var cart = {
            productName : [],
            productPrice : []
        }

        var subtotal = 0;

        var id = 0;

        var divList = $(".column");

        function sortAlphAZ(){
            divList.sort(function(a, b){ return $(a).data("name").localeCompare($(b).data("name"))});    
            $("#container").html(divList);}

        function sortAlphZA(){
            divList.sort(function(a, b){ return $(b).data("name").localeCompare($(a).data("name"))});    
            $("#container").html(divList);}

        function sortPriceHighLow(){
            divList.sort(function(a, b){ return $(b).data("price")-$(a).data("price")});    
            $("#container").html(divList);}

        function sortPriceLowHigh(){
            divList.sort(function(a, b){ return $(a).data("price")-$(b).data("price")});    
            $("#container").html(divList);}

        function openNav() {
            document.getElementById("mySidenav").style.width = "250px";
        }

        /* Set the width of the side navigation to 0 */
        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }

        function removeItem(){
            let idVal = event.srcElement.id; // ex. id0_2
            let buttonElement = document.getElementById(idVal); // contains _2 -> button
            let buttonIdVal = buttonElement.id;
            main_temp = buttonIdVal.replace("_2", ""); // name id
            mainElement = document.getElementById(main_temp);
            
            let priceElement = document.getElementById(main_temp+"_1"); // contains _1 -> price

            var sub = document.getElementById("subtotal_price");
            subtotal = subtotal - priceElement.textContent;
            var temp = parseFloat(subtotal.toFixed(2));
            subtotal = temp;
            console.log("subtotal: " + subtotal);
            
            sub.innerHTML = "$"+subtotal;
            
            mainElement.remove();   // remove name of product
            priceElement.remove();  // remove price of product
            buttonElement.remove(); // remove the button to the added product
        }

        function addToCart(){
            let name = event.srcElement.id;
            console.log(name);
            let price = 0;
            
            if (name == "Blueberries"){
                cart.productName.push("Blueberries");
                price = 3.99;
                cart.productPrice.push(price);
            }

            if (name == "Pineapple"){
                cart.productName.push("Pineapple");
                price = 2.99;
                cart.productPrice.push(price);
            }

            if (name == "Bananas"){
                cart.productName.push("Bananas");
                price = 0.69;
                cart.productPrice.push(price);
            }

            if (name == "RedApple"){
                cart.productName.push("Red Apple");
                price = 1;
                cart.productPrice.push(price);
            }

            if (name == "Peach"){
                cart.productName.push("Peach");
                price = 0.75;
                cart.productPrice.push(price);
            }

            if (name == "Raspberries"){
                cart.productName.push("Raspberries");
                price = 2.99;
                cart.productPrice.push(price);
            }

            if (name == "Mangos"){
                cart.productName.push("Mangos");
                price = 1.99;
                cart.productPrice.push(price);
            }

            if (name == "Oranges"){
                cart.productName.push("Oranges");
                price = 2.99;
                cart.productPrice.push(price);
            }

            if (name == "Durian"){
                cart.productName.push("Durian");
                price = 7.99;
                cart.productPrice.push(price);
            }

            if (name == "Kiwi"){
                cart.productName.push("Kiwi");
                price = 0.43;
                cart.productPrice.push(price);
            }

            if (name == "Dragonfruit"){
                cart.productName.push("Dragonfruit");
                price = 5.59;
                cart.productPrice.push(price);
            }

            if (name == "Grapes"){
                cart.productName.push("Grapes");
                price = 4.98;
                cart.productPrice.push(price);
            }

            var idName = "id" + id;

            var table = document.getElementById("items");
            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var cellOne = row.insertCell(0);
            var elementOne = document.createElement("p");
            elementOne.textContent = name;
            elementOne.style.color = "white";
            elementOne.id = idName;
            cellOne.appendChild(elementOne);

            var cellTwo = row.insertCell(1);
            var elementTwo = document.createElement("p");
            elementTwo.textContent = price;
            elementTwo.style.color = "white";
            elementTwo.id = idName+"_1";
            cellTwo.appendChild(elementTwo);

            var cellThree = row.insertCell(2);
            var elementThree = document.createElement("input");
            elementThree.type = "button";
            elementThree.value = "Remove";
            elementThree.id = idName+"_2";
            elementThree.onclick = removeItem;
            cellThree.appendChild(elementThree);

            var sub = document.getElementById("subtotal_price");
            subtotal = subtotal + price
            var temp = parseFloat(subtotal.toFixed(2));
            subtotal = temp;
            console.log("subtotal: " + subtotal);
            
            sub.innerHTML = "$"+subtotal;

            id++;
        }


    </script>
</html>